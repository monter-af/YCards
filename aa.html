<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Отображение объектов на карте</title>
    <meta charset="utf-8">

    <style>
        html, body, .map {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=aba747f6-b17f-41b6-b603-844f2c6c603a&lang=ru_RU" type="text/javascript"></script>

    <script type="text/javascript">
        ymaps.ready(init);
        
        function init() {
            var myMap = new ymaps.Map("map", {
                       center: [43.061956, 132.134011],
                       zoom: 10,
                    controls: ["zoomControl"]
                });
            var JSONID="AKfycbyNto4-IGu-Bdlzh6Jf4LZdgGjeY_msN4zY01vrKQH8WWqIrUpNWGz6DgGgL2KabOzO";
            // var objectManager = new ymaps.ObjectManager({
            //         // Чтобы метки начали кластеризоваться, выставляем опцию.
            //         // clusterize: true,
            //         // ObjectManager принимает те же опции, что и кластеризатор.
            //         // gridSize: 32,
            //         // clusterDisableClickZoom: true
            //     });
            myMap.controls.get("zoomControl").options.set({size: "small"});
            // objectManager.objects.options.set('preset', 'islands#greenDotIcon');
            // objectManager.clusters.options.set('preset', 'islands#greenClusterIcons');
    
            // Добавляем объекты на карту.
            // myMap.geoObjects.add(objectManager);
            
            $.ajax({
                url: "https://script.google.com/macros/s/"+JSONID+"/exec",
                type: "GET",
            }).done(function(data) {
                data.features.forEach(function (obj) {
                    if(obj.properties.statusObject === "Z") {
                        myMap.geoObjects
                        .add(new ymaps.Placemark([obj.geometry.coordinates[1], obj.geometry.coordinates[0]],
                                                 { balloonContent: obj.properties.description }, 
                                                 { preset: "islands#" + obj.properties.markerColor + "CircleDotIcon",   iconCaptionMaxWidth: "50" }
                        ))
                    }
                });
                // objectManager.add(data);
            });
        };
    </script>
</head>
<body>
<div id="map" class="map"></div>
</body>
</html>
